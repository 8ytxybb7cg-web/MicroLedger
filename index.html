<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <title>å°æ•¸ç°¿ Micro Ledger</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        /* =========================================
           ğŸ¨ iOS 26 ç»ç’ƒæ“¬æ…‹è¨­è¨ˆç³»çµ± (Design System)
           ========================================= */
        :root {
            --bg-color: #050505;
            --accent-color: #0A84FF; /* iOS Blue */
            --success-color: #30D158; /* iOS Green */
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.6);
            
            /* ç»ç’ƒè³ªæ„Ÿè®Šæ•¸ */
            --glass-bg: rgba(30, 30, 40, 0.4);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-blur: 25px;
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            
            /* åœ“è§’èˆ‡é–“è· */
            --radius-xl: 28px;
            --radius-lg: 18px;
            --radius-md: 12px;
        }

        * {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            overflow: hidden; /* Intro æœŸé–“ç¦æ­¢æ»¾å‹• */
            height: 100vh;
        }

        /* å‹•æ…‹æµå…‰èƒŒæ™¯ (Ambient Background) */
        .ambient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at 10% 20%, rgba(20, 40, 80, 0.4) 0%, transparent 40%),
                        radial-gradient(circle at 90% 80%, rgba(60, 20, 60, 0.3) 0%, transparent 40%);
            z-index: -1;
            animation: breathe 10s infinite alternate ease-in-out;
        }

        @keyframes breathe {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.1); opacity: 1; }
        }

        /* æ•¸å­—å°ˆç”¨å­—é«” */
        .mono-num {
            font-family: 'JetBrains Mono', monospace;
        }

        /* =========================================
           ğŸš€ Intro Loading é«”é©— (Splash Screen)
           ========================================= */
        #intro-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(5, 5, 5, 0.8);
            backdrop-filter: blur(40px); /* é‡åº¦æ¨¡ç³Š */
            z-index: 9999;
            transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), backdrop-filter 0.8s ease;
        }

        #intro-layer.fade-out {
            opacity: 0;
            backdrop-filter: blur(0px);
            pointer-events: none;
        }

        .intro-content {
            width: 80%;
            max-width: 320px;
            text-align: center;
        }

        /* å“ç‰Œ Logo/æ¨™é¡Œ */
        .app-title {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: 2px;
            margin-bottom: 60px;
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
            background: linear-gradient(135deg, #fff 0%, #aaa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* ç‹€æ…‹æ–‡å­—å®¹å™¨ */
        .status-text-container {
            height: 24px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        .status-text {
            font-size: 14px;
            color: var(--text-secondary);
            position: absolute;
            width: 100%;
            left: 0;
            top: 0;
            transition: opacity 0.4s ease, transform 0.4s ease;
            opacity: 0;
            transform: translateY(10px);
        }

        .status-text.active {
            opacity: 1;
            transform: translateY(0);
        }

        .status-text.exit {
            opacity: 0;
            transform: translateY(-10px);
        }

        /* ç»ç’ƒå°è»Œé€²åº¦æ¢ */
        .progress-track {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #fff, var(--success-color));
            border-radius: 10px;
            box-shadow: 0 0 10px var(--success-color);
            transition: width 0.1s linear; /* JS æ§åˆ¶å¯¬åº¦ */
        }

        /* =========================================
           ğŸ“± ä¸»æ‡‰ç”¨å®¹å™¨ (Main App Placeholder)
           ========================================= */
        #app-container {
            opacity: 0;
            transform: scale(0.98);
            transition: opacity 0.8s ease, transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            padding-top: 60px; /* é¿é–‹é ‚éƒ¨ç‹€æ…‹æ¬„ */
        }

        #app-container.visible {
            opacity: 1;
            transform: scale(1);
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

    <div class="ambient-bg"></div>

    <div id="intro-layer">
        <div class="intro-content">
            <div class="app-title">å°æ•¸ç°¿</div>
            
            <div class="status-text-container">
                <div class="status-text" id="text-1">æ•´ç†æ¯ä¸€ç­†å°æ•¸ä¸­</div>
                <div class="status-text" id="text-2">é€ç­†æ ¸å°ï¼Œè«‹ç¨å€™</div>
                <div class="status-text" id="text-3">è¨ˆç®—ä¸­ï¼Œå””æ€¥</div>
                <div class="status-text" id="text-4">æº–å‚™å°±ç·’</div>
            </div>

            <div class="progress-track">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </div>
    </div>

    <div id="app-container">
        <h1 style="text-align: center; font-weight: 300;">Micro Ledger</h1>
        <p style="text-align: center; color: var(--text-secondary);">Waiting for data module...</p>
    </div>

    <script>
        // =========================================
        // 1. Supabase åˆå§‹åŒ– (ä½¿ç”¨ä½ çš„ Credentials)
        // =========================================
        const SUPABASE_URL = 'https://myrhatzdypiwwgmmfbuw.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_bnnah-2fsCaQnKZDoKNJQw_NuYQVvKi'; // é€™è£¡æ”¾ Public Key æ²’å•é¡Œ
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // =========================================
        // 2. Intro Loading é‚è¼¯æ§åˆ¶å™¨
        // =========================================
        const introState = {
            progress: 0,
            targetPhase: 90, // ç¬¬ä¸€éšæ®µç›®æ¨™æ˜¯ 90%
            isAppReady: false // æ¨™è¨˜æ•¸æ“šæ˜¯å¦åŠ è¼‰å®Œæˆ
        };

        const els = {
            layer: document.getElementById('intro-layer'),
            bar: document.getElementById('progress-bar'),
            texts: [
                document.getElementById('text-1'),
                document.getElementById('text-2'),
                document.getElementById('text-3'),
                document.getElementById('text-4')
            ],
            app: document.getElementById('app-container')
        };

        // æ–‡æ¡ˆåˆ‡æ› helper
        function showText(index) {
            els.texts.forEach((el, i) => {
                if (i === index) {
                    el.classList.add('active');
                    el.classList.remove('exit');
                } else if (el.classList.contains('active')) {
                    el.classList.add('exit');
                    el.classList.remove('active');
                }
            });
        }

        // å•Ÿå‹•é–‹å ´å‹•ç•«
        function startIntro() {
            showText(0); // é¡¯ç¤º "æ•´ç†æ¯ä¸€ç­†å°æ•¸ä¸­"
            
            let lastTime = performance.now();

            function tick(currentTime) {
                const dt = currentTime - lastTime;
                lastTime = currentTime;

                // --- éšæ®µ 1: 0% -> 70% (å¿«é€Ÿ) ---
                if (introState.progress < 70) {
                    // é€Ÿåº¦: æ¯æ¯«ç§’ç´„ 0.1% (800ms è·‘å®Œ 70% å·¦å³)
                    introState.progress += dt * 0.12; 
                } 
                // --- éšæ®µ 2: 70% -> 90% (æ”¾æ…¢) ---
                else if (introState.progress < 90) {
                    showText(1); // "é€ç­†æ ¸å°ï¼Œè«‹ç¨å€™"
                    // é€Ÿåº¦: è®Šæ…¢ 
                    introState.progress += dt * 0.04;
                }
                // --- éšæ®µ 3: 90% åœç•™ (ç­‰å¾…æ•¸æ“š) ---
                else if (introState.progress >= 90 && !introState.isAppReady) {
                    introState.progress = 90; // å¼·åˆ¶é–å®š
                    showText(2); // "è¨ˆç®—ä¸­ï¼Œå””æ€¥"
                }
                // --- éšæ®µ 4: è¡åˆº 100% (æ•¸æ“šå›ä¾†äº†) ---
                else if (introState.isAppReady && introState.progress < 100) {
                    introState.progress += dt * 0.5; // æ¥µé€Ÿå®Œæˆ
                }

                // æ¸²æŸ“é€²åº¦æ¢
                els.bar.style.width = Math.min(introState.progress, 100) + '%';

                // æª¢æŸ¥æ˜¯å¦çµæŸ
                if (introState.progress >= 100) {
                    finishIntro();
                } else {
                    requestAnimationFrame(tick);
                }
            }

            requestAnimationFrame(tick);
        }

        // çµæŸå‹•ç•«
        function finishIntro() {
            showText(3); // "æº–å‚™å°±ç·’" (ä¸€é–ƒè€Œé)
            
            setTimeout(() => {
                els.layer.classList.add('fade-out'); // ç»ç’ƒéœ§æ°£æ•£å»
                els.app.classList.add('visible'); // ä¸»ç¨‹å¼æµ®ç¾
                document.body.style.overflow = 'auto'; // æ¢å¾©æ»¾å‹•
            }, 200);
        }

        // =========================================
        // 3. æ¨¡æ“¬ App åˆå§‹åŒ– (è‡¨æ™‚æ¸¬è©¦ç”¨)
        // æ³¨æ„ï¼šåœ¨ä¸‹ä¸€éƒ¨åˆ†ä»£ç¢¼ä¸­ï¼Œæˆ‘å€‘æœƒç”¨çœŸå¯¦æ•¸æ“šåŠ è¼‰ä¾†æ›¿æ›é€™è£¡
        // =========================================
        
        // ç«‹å³å•Ÿå‹•é–‹å ´
        startIntro();

        // æš«æ™‚æ¨¡æ“¬ 3 ç§’å¾Œæ•¸æ“šæŠ“å®Œ (Part 2 å°‡æœƒç§»é™¤æ­¤æ¨¡æ“¬)
        // ä½ å¯ä»¥è©¦è‘—èª¿æ•´é€™è£¡çš„æ™‚é–“ï¼Œçœ‹çœ‹ "è¨ˆç®—ä¸­ï¼Œå””æ€¥" æœƒåœç•™å¤šä¹…
        setTimeout(() => {
            console.log("Mock Data Loaded!"); 
            introState.isAppReady = true; // è§£é– 90% -> 100%
        }, 4000); // è¨­å®š 4 ç§’ä»¥ä¾¿ä½ èƒ½çœ‹æ¸…æ¥š "è¨ˆç®—ä¸­ï¼Œå””æ€¥"

    </script>
</body>
</html>
